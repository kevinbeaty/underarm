!function(){function n(n){this.value=n}var e,r=this,t=r._r,u=Array.prototype.slice,i=function(n,r){if(n instanceof i){if(r===e)return n;var t=new i(n._wrapped,i.append(n._wrappedFns,r));return t._resolveSingleValue=n._resolveSingleValue,t}return this instanceof i?(this._wrapped=n,r instanceof i&&(r=r._wrappedFns,this._resolveSingleValue=r._resolveSingleValue),this._wrappedFns=o.isFunction(r)?[r]:o.isArray(r)?o.filter(r,o.isFunction):[],void 0):new i(n,r)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports._r=i):r._r=i,i.VERSION="0.0.5";var o=r._;"undefined"==typeof o&&"undefined"!=typeof require&&(o=require("underscore")._),i.each=i.forEach=function(n){return function(r){return function(t,u,i){return t===e?r():u===e?r(t):(n(u,i),r(t,u,i))}}},i.map=i.collect=function(n){return n=o.iteratee(n),function(r){return function(t,u,i){return t===e?r():u===e?r(t):r(t,n(u,i),i)}}},i.find=i.detect=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(r){return function(t,u,o){return t===e?r():u===e?r(t):n(u,o)?i.reduced(r(t,u,o)):t}}},i.filter=i.select=function(n){return n=o.iteratee(n),function(r){return function(t,u,i){return t===e?r():u===e?r(t):n(u,i)?r(t,u,i):t}}},i.reject=function(n){return i.filter(o.negate(o.iteratee(n)))},i.every=i.all=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(r){var t=!1;return function(u,o,a){return u===e?r():o===e?(t||(u=r(u,!0)),r(u)):n(o,a)?u:(t=!0,i.reduced(r(u,!1)))}}},i.some=i.any=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(r){var t=!1;return function(u,o,a){return u===e?r():o===e?(t||(u=r(u,t)),r(u)):n(o,a)?(t=!0,i.reduced(r(u,t,a))):u}}},i.contains=i.include=function(n){return i.some.call(this,function(e){return e===n})},i.invoke=function(n){var e=u.call(arguments,2),r=o.isFunction(n);return i.map(function(t){return(r?n:t[n]).apply(t,e)})},i.pluck=function(n){return i.map(o.property(n))},i.where=function(n){return i.filter(o.matches(n))},i.findWhere=function(n){return i.find.call(this,o.matches(n))},i.max=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(r){var t,u=-1/0,i=-1/0;return function(o,a,c){return o===e?r():a===e?(o=r(o,u),r(o)):(t=n(a,c),(t>i||t===-1/0&&u===-1/0)&&(u=a,i=t),o)}}},i.min=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(r){var t,u=1/0,i=1/0;return function(o,a,c){return o===e?r():a===e?(o=r(o,u),r(o)):(t=n(a,c),(i>t||1/0===t&&1/0===u)&&(u=a,i=t),o)}}},i.first=i.head=i.take=function(n){return n===e?(i.resolveSingleValue(this),n=1):n=n>0?n:0,function(r){var t=n;return function(n,u,o){return n===e?r():u===e?r(n):(t>0&&(n=r(n,u,o)),--t?n:i.reduced(n))}}},i.initial=function(n){return n=n===e?1:n>0?n:0,function(r){var t=0,u=[],i=0;return function(o,a){if(o===e)return r();if(a===e){for(t=i-n,i=0;t>i;i++)o=r(o,u[i]);return r(o)}return u[i++]=a,o}}},i.last=function(n){return n===e?(i.resolveSingleValue(this),n=1):n=n>0?n:0,function(r){var t=n,u=[],i=0;return function(o,a){if(o===e)return r();if(a===e){for(;t--;)o=r(o,u[i++%n]);return r(o)}return u[i++%n]=a,o}}},i.rest=i.tail=i.drop=function(n){return n=n===e?1:n>0?n:0,function(r){var t=n;return function(n,u,i){return n===e?r():u===e?r(n):t>0?(t--,n):r(n,u,i)}}},i.compact=function(){return i.filter(o.identity)},i.uniq=i.unique=function(n,r){return o.isBoolean(n)||(r=n,n=!1),null!=r&&(r=o.iteratee(r)),function(t){var u=[],i=0;return function(a,c,f){if(a===e)return t();if(c===e)return t(a);if(n)i&&u===c||(a=t(a,c,f)),u=c;else if(r){var s=r(c,i,a);o.indexOf(u,s)<0&&(u.push(s),a=t(a,c,f))}else o.indexOf(u,c)<0&&(u.push(c),a=t(a,c,f));return++i,a}}},i.tap=function(n){return function(r){return function(t,u,i){return t===e?r():u===e?r(t):(n(t,u,i),r(t,u,i))}}},i.mixin=function(n){o.each(o.functions(n),function(e){var r=i[e]=n[e];i.prototype[e]=function(){var n=r.apply(this,arguments);return i(this,n)}})},i.mixin(i),i.noConflict=function(){return r._r=t,this},i.prototype.wrap=function(n){return i(n,this)},i.prototype.transducer=i.prototype.compose=function(){var n=this._wrappedFns;return n.length?o.compose.apply(null,n):e},i.resolveSingleValue=function(n){n instanceof i&&(n._resolveSingleValue=!0)};var a={};i.prototype.value=function(){if(!this._resolveSingleValue)return this.into(i.empty());var n=this.into(a);return n===a?e:n};var c=o.reduce(["iterator","empty","append"],function(n,r){var t=function(){for(var n,u=arguments,i=t._fns,a=i.length;a--;)if(n=i[a].apply(null,u),n!==e)return n;throw new TypeError("cannot find match for "+r+" "+o.toArray(u))};return t._fns=[],t.register=function(n){t._fns.push(n)},n[r]=t,n},{});i.iterator=function(n){return c.iterator(n)},i.iterator.register=function(n){return c.iterator.register(n)};var f="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator";i.iterator.Symbol=f,i.iterator.register(function(n){if(o.isObject(n)){var e=n[f]&&n[f]()||n;if(o.isFunction(e.next))return e}return null}),i.empty=function(n){return n===a?a:c.empty(n)},i.empty.register=function(n){return c.empty.register(n)},i.empty.register(function(n){return n===e||o.isArray(n)?[]:o.isObject(n)?{}:a}),i.append=i.conj=i.conjoin=function(n,r,t){return n===e?[]:r===e||r===a?n:n===a?r:c.append(n,r,t)},i.append.register=function(n){return c.append.register(n)},i.append.register(function(n,r,t){return o.isArray(n)?(n.push(r),n):t!==e&&o.isObject(n)?(n[t]=r,n):r}),i.reduced=function(e){return new n(e)};var s="Reduce of empty array with no initial value";i.reduce=i.foldl=i.inject=function(e,r,t){null==e&&(e=i.empty());var u,a=e.length!==+e.length&&o.keys(e),c=(a||e).length,f=0,l=i.iterator(e);if(l&&o.isFunction(l.next))for(;;){if(u=l.next(),u.done)return t;if(t=r(t,u.value,f++,e),t instanceof n)return t.value}else{if(arguments.length<3){if(!c)throw new TypeError(s);t=e[a?a[f++]:f++]}for(;c>f;f++)if(u=a?a[f]:f,t=r(t,e[u],u,e),t instanceof n)return t.value}return t},i.transduce=function(n,r,t,u){return t===e&&(t=i.append),u===e&&(u=t()),n instanceof i&&(n=n.transducer()),n!==e&&(t=n(t)),t(i.reduce(r,t,u))},i.prototype.transduce=function(n,r,t){return this._wrapped===e?i.transduce(this.transducer(),n,r,t):i.transduce(this.transducer(),this._wrapped,n,r)},i.asCallback=function(r,t,u){var o;return t===e&&(t=i.append),u===e&&(u=null),r!==e&&(t=r(t)),function(r){return r===e&&(o=t(o)),o?o:(u=t(u,r),u instanceof n?(o=u.value,t(o),o):u)}},i.prototype.asCallback=function(n,e){return i.asCallback(this.transducer(),n,e)},i.into=function(n,r,t){var u=i.append;return t===e&&(t=r,r=e),r===e?i.reduce(t,u,n):i.transduce(r,t,u,n)},i.prototype.into=function(n,r){return i.into(n,this.transducer(),r!==e?r:this._wrapped)},i.sequence=function(n,r){return r==e?(r=n,i.into(i.empty(r),r)):i.into(i.empty(r),n,r)},i.prototype.sequence=function(n){return n==e&&(n=this._wrapped),this.into(i.empty(n),n)},i.generate=function(n,r){var t={};return t[f]=function(){var t=r?n():n;return{next:function(){var n=t();return n===e?{done:!0}:{done:!1,value:n}}}},t},i.prototype.generate=function(n,e){return this.wrap(i.generate(n,e))},"function"==typeof define&&define.amd&&define("underscore.transducer",[],function(){return i})}.call(this);
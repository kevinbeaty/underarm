!function(){function n(n){this.value=n}var t=this,r=t._r,e=Array.prototype.slice,i=function(n,t){return n instanceof i?void 0===t?n:new i(n._wrapped,i.append(n._wrappedFns,t)):this instanceof i?(this._wrapped=n,this._wrappedFns=u.isFunction(t)?[t]:u.isArray(t)?u.filter(t,u.isFunction):[],void 0):new i(n,t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports._r=i):t._r=i,i.VERSION="0.0.3";var u=t._;"undefined"==typeof u&&"undefined"!=typeof require&&(u=require("underscore")._),i.each=i.forEach=function(n){return function(t){var r=0;return function(e,i){return void 0===e?t():void 0===i?t(e):(n(i,r++,e),t(e,i))}}},i.map=i.collect=function(n){return n=u.iteratee(n),function(t){return function(r,e){return void 0===r?t():void 0===e?t(r):t(r,n(e))}}},i.find=i.detect=function(n){return n=u.iteratee(n),function(t){return function(r,e){return void 0===r?t():void 0===e?t(r):n(e)?i.reduced(t(r,e)):r}}},i.filter=i.select=function(n){return n=u.iteratee(n),function(t){return function(r,e){return void 0===r?t():void 0===e?t(r):n(e)?t(r,e):r}}},i.reject=function(n){return i.filter(u.negate(u.iteratee(n)))},i.every=i.all=function(n){return n=u.iteratee(n),function(t){var r=!1;return function(e,u){return void 0===e?t():void 0===u?(r||(e=t(e,!0)),t(e)):n(u)?e:(r=!0,i.reduced(t(e,!1)))}}},i.some=i.any=function(n){return n=u.iteratee(n),function(t){var r=!1;return function(e,u){return void 0===e?t():void 0===u?(r||(e=t(e,r)),t(e)):n(u)?(r=!0,i.reduced(t(e,r))):e}}},i.contains=i.include=function(n){return i.some(function(t){return t===n})},i.invoke=function(n){var t=e.call(arguments,2),r=u.isFunction(n);return i.map(function(e){return(r?n:e[n]).apply(e,t)})},i.pluck=function(n){return i.map(u.property(n))},i.where=function(n){return i.filter(u.matches(n))},i.findWhere=function(n){return i.find(u.matches(n))},i.max=function(n){return n=u.iteratee(n),function(t){var r,e=-1/0,i=-1/0;return function(u,o){return void 0===u?t():void 0===o?(u=t(u,e),t(u)):(r=n(o),(r>i||r===-1/0&&e===-1/0)&&(e=o,i=r),u)}}},i.min=function(n){return n=u.iteratee(n),function(t){var r,e=1/0,i=1/0;return function(u,o){return void 0===u?t():void 0===o?(u=t(u,e),t(u)):(r=n(o),(i>r||1/0===r&&1/0===e)&&(e=o,i=r),u)}}},i.first=i.head=i.take=function(n){return n=void 0==n?1:n>0?n:0,function(t){var r=n;return function(n,e){return void 0===n?t():void 0===e?t(n):(r>0&&(n=t(n,e)),--r?n:i.reduced(n))}}},i.initial=function(n){return n=void 0==n?1:n>0?n:0,function(t){var r=0,e=[],i=0;return function(u,o){if(void 0===u)return t();if(void 0===o){for(r=i-n,i=0;r>i;i++)u=t(u,e[i]);return t(u)}return e[i++]=o,u}}},i.last=function(n){return n=void 0==n?1:n>0?n:0,function(t){var r=n,e=[],i=0;return function(u,o){if(void 0===u)return t();if(void 0===o){for(;r--;)u=t(u,e[i++%n]);return t(u)}return e[i++%n]=o,u}}},i.rest=i.tail=i.drop=function(n){return n=void 0==n?1:n>0?n:0,function(t){var r=n;return function(n,e){return void 0===n?t():void 0===e?t(n):r>0?(r--,n):t(n,e)}}},i.compact=function(){return i.filter(u.identity)},i.uniq=i.unique=function(n,t){return u.isBoolean(n)||(t=n,n=!1),null!=t&&(t=u.iteratee(t)),function(r){var e=[],i=0;return function(o,c){if(void 0===o)return r();if(void 0===c)return r(o);if(n)i&&e===c||(o=r(o,c)),e=c;else if(t){var f=t(c,i,o);u.indexOf(e,f)<0&&(e.push(f),o=r(o,c))}else u.indexOf(e,c)<0&&(e.push(c),o=r(o,c));return++i,o}}},i.tap=function(n){return function(t){return function(r,e){return void 0===r?t():void 0===e?t(r):(n(r,e),t(r,e))}}},i.mixin=function(n){u.each(u.functions(n),function(t){var r=i[t]=n[t];i.prototype[t]=function(){var n=r.apply(i,arguments);return i(this,n)}})},i.mixin(i),i.noConflict=function(){return t._r=r,this},i.prototype.transducer=i.prototype.compose=function(){return u.compose.apply(null,this._wrappedFns)},i.reduced=function(t){return new n(t)};var o="Reduce of empty array with no initial value",c="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator";i.reduce=i.foldl=i.inject=function(t,r,e){null==t&&(t=[]);var i,f=t.length!==+t.length&&u.keys(t),a=(f||t).length,d=0,s=f&&(t[c]&&t[c]()||t);if(u.isFunction(s.next))for(;;){if(i=s.next(),i.done)return e;if(e=r(e,i.value,d++,t),e instanceof n)return e.value}else{if(arguments.length<3){if(!a)throw new TypeError(o);e=t[f?f[d++]:d++]}for(;a>d;d++)if(i=f?f[d]:d,e=r(e,t[i],i,t),e instanceof n)return e.value}return e},i.completing=function(n,t){return t=t||u.identity,function(r,e){return void 0===r?n():void 0===e?t(r):n(r,e)}},i.append=i.conj=i.conjoin=function(n,t){return void 0===n?[]:void 0===t?n:u.isArray(n)?(n.push(t),n):t},i.prototype.toArray=function(){return this.transduce()},i.lastValue=function(n,t){return void 0===n?null:void 0===t?n:t},i.prototype.lastValue=function(n){var t={},r=this.transduce(i.lastValue,t);return r===t?n:r},i.transduce=function(n,t,r,e){return void 0===r&&(r=i.append),void 0===e&&(e=r()),n instanceof i&&(n=n.transducer()),void 0!==n&&(r=n(r)),r(i.reduce(t,r,e))},i.prototype.transduce=function(n,t,r){return void 0===this._wrapped?i.transduce(this.transducer(),n,t,r):i.transduce(this.transducer(),this._wrapped,n,t)},i.asCallback=function(t,r,e){var u;return void 0===r&&(r=i.lastValue),void 0===e&&(e=r()),void 0!==t&&(r=t(r)),function(t){return void 0===t&&(u=r(u)),u?u:(e=r(e,t),e instanceof n?(u=e.value,r(u),u):e)}},i.prototype.asCallback=function(n,t){return i.asCallback(this.transducer(),n,t)},i.into=function(n,t,r){var e=i.append;return void 0===r?(r=t,i.reduce(r,e,n)):i.transduce(t,r,e,n)},i.prototype.into=function(n,t){return i.into(n,this.transducer(),t)},i.generate=function(n){return{next:function(){var t=n();return void 0===t?{done:!0}:{done:!1,value:t}}}},i.prototype.generate=function(n){return this.transduce(i.generate(n))},"function"==typeof define&&define.amd&&define("underscore.transducer",[],function(){return i})}.call(this);
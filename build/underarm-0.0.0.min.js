/* underarm v0.0.0 | http://simplectic.com/underarm | License: MIT */(function(e){"use strict";function n(e){return e}function r(e){errorHandler=e}function T(){return Z(new x)}function N(e,t,n,r,i){var s,o=T();return e.subscribe(function(e){c(r)&&r(e),o.next(e),s=e},function(){c(t)&&t(s),o.resolve(s)},function(e){c(n)&&n(e),o.error(e)}),o}function C(e){return e instanceof E||e instanceof x}function k(e){e=G(e);var t;return C(e)?t=e:c(e)?(t=new E,t.onSubscribe=e):(t=new E,t.onSubscribe=function(t){t.next(e),t.complete()}),t}function L(e,t,n,r,i){var s=new E,e=k(e);return s.onSubscribe=function(s){var o=function(e){return function(n){e.call(t,s,n)}},u=L.defaults,a=o(c(n)?n:u.next),f=o(c(r)?r:u.complete),l=o(c(i)?i:u.error);return e.subscribe(a,f,l)},s}function A(e,t,n,r,i,s){c(i)||(i=L.defaults.complete);var o=0,u,a,l=function(e){a=this,u=e,o===0&&i.call(a,e)},h=function(){o--,o===0&&!f(u)&&l.call(a,u)},p=function(e,i){var s;if(!e.disposed)try{s=G(n.call(t,i)),C(s)?(o++,Z(s).then(function(t){r(e,i,t)},function(t){e.error(t)}).then(h)):r(e,i,s)}catch(u){e.error(u)}};return L(e,t,p,l,s)}function O(e,t,n){return A(e,n,t,function(e,t){e.next(t)})}function M(e,t,n){return A(e,n,t,function(e,t,n){e.next(n)})}function _(e,t,r,i){var s=arguments.length>2;return A(e,i,n,function(e,n){s?r=t.call(i,r,n):(r=n,s=!0),e.next(r)})}function D(e,t,r,i){var s=arguments.length>2,o=[];return A(e,i,n,function(e,t){o.push(t)},function(e){var n=o.length-1;for(;n>=0;n--)s?r=t.call(i,r,o[n]):(r=o[n],s=!0),e.next(r);e.complete()})}function P(e,t,n){return A(e,n,t,function(e,t,n){n&&(e.next(t),e.complete())})}function H(e,t,n){return A(e,n,t,function(e,t,n){n&&e.next(t)})}function B(e,t,n){return A(e,n,t,function(e,t,n){n||e.next(t)})}function j(e,t,n){return A(e,n,t,function(e,t,n){e.next(n),n||e.complete()})}function F(e,t,n){return A(e,n,t,function(e,t,n){e.next(n),n&&e.complete()})}function I(e,t,n){return F(e,function(e){return e===t},n)}function q(e,t){var n=d.call(arguments,2);return M(e,function(e){return(c(t)?t:e[t]).apply(e,n)})}function R(e,t){return M(e,function(e){return e[t]})}function U(e,t,r){f(t)&&(t=n);var i={computed:-Infinity};return A(e,r,t,function(e,t,n){n>i.computed&&(i.value=t,i.computed=n),e.next(i.value)})}function z(e,t,r){f(t)&&(t=n);var i={computed:Infinity};return A(e,r,t,function(e,t,n){n<i.computed&&(i.value=t,i.computed=n),e.next(i.value)})}function W(e,t,r){var i=[];return A(e,r,n,function(e,n){var r=w(n,t);v.call(i,b(i,n,r),0,n)},function(e){var t=0,n=i.length;for(;t<n;t++)e.next(i[t]);e.complete()})}function X(e,t){return W(e,n,t)}function V(e,t,r){var i={};return A(e,r,n,function(e,n){var s=w(n,t),o=s.call(r,n),u=i[o];f(u)&&(u=[],i[o]=u),u.push(n)},function(e){var t;for(t in i)h(i,t)&&e.next([t,i[t]]);e.complete()})}function $(e,t){return A(e,t,n,function(e,t){if(a(t)){var n=0,r=t.length;for(;n<r;n++)e.next(t[n])}else if(l(t)){var i;for(i in t)h(t,i)&&e.next([i,t[i]])}else e.next(t)})}function J(e,t,r){var i={};return A(e,r,n,function(e,n){var s=w(n,t),o=s.call(r,n);a(o)?o.length===2?i[o[0]]=o[1]:i[o[0]]=d.call(o,1):i[o]=n},function(e){e.next(i),e.complete()})}function K(e,t){return J(e,n,t)}function Q(e){this._wrapped=k(e)}function G(e){return e instanceof Q?e._wrapped:e}function Y(e){var n,r,i=function(e,n){Q.prototype[e]=function(){var e=d.call(arguments),r;return m.call(e,this._wrapped),r=n.apply(t,e),this._chain?t(r).chain():r}};for(n in e)c(e[n])&&(r=e[n],t[n]=r,i(n,r))}function Z(e){return t(e).chain()}var t=function(e){return new Q(e)};typeof exports!="undefined"?exports._r=t:e._r=t,t.identity=n,t.defaultErrorHandler=r;var i=Object.prototype,s=Array.prototype,o=i.toString,u=i.hasOwnProperty,a=Array.isArray||function(e){return o.call(e)=="[object Array]"},f=function(e){return e===void 0},l=function(e){return e===Object(e)},c=function(e){return o.call(e)=="[object Function]"},h=function(e,t){return e&&u.call(e,t)},p=s.push,d=s.slice,v=s.splice,m=s.unshift,g=s.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},y=function(e,t){var n=g.call(e,t);n>=0&&v.call(e,n,1)},b=function(e,t,r){r=r?r:n;var i=r(t),s=0,o=e.length,u;while(s<o)u=s+o>>1,r(e[u])<i?s=u+1:o=u;return s},w=function(e,t){return c(t)?t:function(e){return e[t]}},E=function(){function e(){this.consumers=[]}function n(e,t,n){var r=new S(e,t,n),i=this;p.call(i.consumers,r),r.onDispose(function(){i.unsubscribe(r)});if(i.onSubscribe){var s=i.onSubscribe(r);f(s)||(c(s)?r.onDispose(s):c(s.dispose)&&r.onDispose(function(){s.dispose()}))}return r}function r(e){y(this.consumers,e)}var t=e.prototype;return t.onSubscribe=null,t.subscribe=n,t.unsubscribe=r,e}(),S=function(){function e(e,t,n){a(this,"next",e),a(this,"complete",t),a(this,"error",n),this.disposed=!1,this.onDisposes=[]}function n(e){}function r(e){console.log(e),this.dispose()}function i(){this.dispose()}function s(e){f(e)||this.next(e),this.complete()}function o(){var e=this.onDisposes;u=e.pop();while(u)u(),u=e.pop();this.disposed=!0}function u(e){this.disposed?e():this.onDisposes.push(e)}function a(e,t,n){if(c(n)){var r=e[t];e[t]=function(t){this.disposed||(n.call(e,t),r.call(e,t))}}}var t=e.prototype;return t.next=n,t.error=r,t.complete=i,t.resolve=s,t.dispose=o,t.onDispose=u,e}(),x=function(){function e(){this.producer=new E,this.disposed=!1}function n(e,t,n){return this.producer.subscribe(e,t,n)}function r(e){a(this,"next",e)}function i(e){a(this,"error",e)}function s(){a(this,"complete")}function o(e){f(e)||this.next(e),this.complete()}function u(){this.disposed=!0,a(this,"dispose")}function a(e,t,n){var r=0,i=e.producer.consumers;for(;r<i.length;r++)i[r][t](n)}var t=e.prototype;return t.subscribe=n,t.next=r,t.error=i,t.complete=s,t.resolve=o,t.dispose=u,e}();t.promise=T,t.then=N,L.defaults={next:function(e,t){e.next(t)},complete:function(e){e.complete()},error:function(e,t){e.error(t)}},t.each=t.forEach=O,t.map=t.collect=M,t.reduce=t.foldl=t.inject=_,t.reduceRight=t.foldr=D,t.find=t.detect=P,t.filter=t.select=H,t.reject=B,t.every=t.all=j,t.any=t.some=F,t.include=t.contains=I,t.invoke=t.call=q,t.pluck=t.get=R,t.max=U,t.min=z,t.sortBy=W,t.sort=X,t.groupBy=V,t.seq=$,t.zipMapBy=J,t.zipMap=K,t.mixin=Y,t.mixin(t),t.chain=Z;var et=Q.prototype;et.chain=function(){return this._chain=!0,this},et.value=function(){return this._wrapped},et.subscribe=function(e,t,n){return this._wrapped.subscribe(e,t,n)},et.resolve=function(e){return this.value().resolve(e)},et.error=function(e){return this.value().error(e)},et.next=function(e){return this.value().next(e)},et.complete=function(){return this.value().complete()}})(this);
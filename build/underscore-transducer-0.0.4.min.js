!function(){function n(n){this.value=n}var e,t=this,r=t._r,u=Array.prototype.slice,i=function(n,t){if(n instanceof i){if(t===e)return n;var r=new i(n._wrapped,i.append(n._wrappedFns,t));return r._resolveSingleValue=n._resolveSingleValue,r}return this instanceof i?(this._wrapped=n,t instanceof i&&(t=t._wrappedFns,this._resolveSingleValue=t._resolveSingleValue),this._wrappedFns=o.isFunction(t)?[t]:o.isArray(t)?o.filter(t,o.isFunction):[],void 0):new i(n,t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports._r=i):t._r=i,i.VERSION="0.0.4";var o=t._;"undefined"==typeof o&&"undefined"!=typeof require&&(o=require("underscore")._),i.each=i.forEach=function(n){return function(t){var r=0;return function(u,i){return u===e?t():i===e?t(u):(n(i,r++,u),t(u,i))}}},i.map=i.collect=function(n){return n=o.iteratee(n),function(t){return function(r,u){return r===e?t():u===e?t(r):t(r,n(u))}}},i.find=i.detect=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(t){return function(r,u){return r===e?t():u===e?t(r):n(u)?i.reduced(t(r,u)):r}}},i.filter=i.select=function(n){return n=o.iteratee(n),function(t){return function(r,u){return r===e?t():u===e?t(r):n(u)?t(r,u):r}}},i.reject=function(n){return i.filter(o.negate(o.iteratee(n)))},i.every=i.all=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(t){var r=!1;return function(u,o){return u===e?t():o===e?(r||(u=t(u,!0)),t(u)):n(o)?u:(r=!0,i.reduced(t(u,!1)))}}},i.some=i.any=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(t){var r=!1;return function(u,o){return u===e?t():o===e?(r||(u=t(u,r)),t(u)):n(o)?(r=!0,i.reduced(t(u,r))):u}}},i.contains=i.include=function(n){return i.some.call(this,function(e){return e===n})},i.invoke=function(n){var e=u.call(arguments,2),t=o.isFunction(n);return i.map(function(r){return(t?n:r[n]).apply(r,e)})},i.pluck=function(n){return i.map(o.property(n))},i.where=function(n){return i.filter(o.matches(n))},i.findWhere=function(n){return i.find.call(this,o.matches(n))},i.max=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(t){var r,u=-1/0,i=-1/0;return function(o,a){return o===e?t():a===e?(o=t(o,u),t(o)):(r=n(a),(r>i||r===-1/0&&u===-1/0)&&(u=a,i=r),o)}}},i.min=function(n){return n=o.iteratee(n),i.resolveSingleValue(this),function(t){var r,u=1/0,i=1/0;return function(o,a){return o===e?t():a===e?(o=t(o,u),t(o)):(r=n(a),(i>r||1/0===r&&1/0===u)&&(u=a,i=r),o)}}},i.first=i.head=i.take=function(n){return n===e?(i.resolveSingleValue(this),n=1):n=n>0?n:0,function(t){var r=n;return function(n,u){return n===e?t():u===e?t(n):(r>0&&(n=t(n,u)),--r?n:i.reduced(n))}}},i.initial=function(n){return n=n===e?1:n>0?n:0,function(t){var r=0,u=[],i=0;return function(o,a){if(o===e)return t();if(a===e){for(r=i-n,i=0;r>i;i++)o=t(o,u[i]);return t(o)}return u[i++]=a,o}}},i.last=function(n){return n===e?(i.resolveSingleValue(this),n=1):n=n>0?n:0,function(t){var r=n,u=[],i=0;return function(o,a){if(o===e)return t();if(a===e){for(;r--;)o=t(o,u[i++%n]);return t(o)}return u[i++%n]=a,o}}},i.rest=i.tail=i.drop=function(n){return n=n===e?1:n>0?n:0,function(t){var r=n;return function(n,u){return n===e?t():u===e?t(n):r>0?(r--,n):t(n,u)}}},i.compact=function(){return i.filter(o.identity)},i.uniq=i.unique=function(n,t){return o.isBoolean(n)||(t=n,n=!1),null!=t&&(t=o.iteratee(t)),function(r){var u=[],i=0;return function(a,c){if(a===e)return r();if(c===e)return r(a);if(n)i&&u===c||(a=r(a,c)),u=c;else if(t){var f=t(c,i,a);o.indexOf(u,f)<0&&(u.push(f),a=r(a,c))}else o.indexOf(u,c)<0&&(u.push(c),a=r(a,c));return++i,a}}},i.tap=function(n){return function(t){return function(r,u){return r===e?t():u===e?t(r):(n(r,u),t(r,u))}}},i.mixin=function(n){o.each(o.functions(n),function(e){var t=i[e]=n[e];i.prototype[e]=function(){var n=t.apply(this,arguments);return i(this,n)}})},i.mixin(i),i.prototype.wrap=function(n){return i(n,this)},i.resolveSingleValue=function(n){n instanceof i&&(n._resolveSingleValue=!0)},i.prototype.value=function(){if(!this._resolveSingleValue)return this.transduce();var n={},t=this.transduce(i.lastValue,n);return t===n?e:t},i.noConflict=function(){return t._r=r,this},i.prototype.transducer=i.prototype.compose=function(){return o.compose.apply(null,this._wrappedFns)},i.reduced=function(e){return new n(e)};var a="Reduce of empty array with no initial value",c="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator";i.reduce=i.foldl=i.inject=function(e,t,r){null==e&&(e=[]);var u,i=e.length!==+e.length&&o.keys(e),f=(i||e).length,l=0,s=i&&(e[c]&&e[c]()||e);if(o.isFunction(s.next))for(;;){if(u=s.next(),u.done)return r;if(r=t(r,u.value,l++,e),r instanceof n)return r.value}else{if(arguments.length<3){if(!f)throw new TypeError(a);r=e[i?i[l++]:l++]}for(;f>l;l++)if(u=i?i[l]:l,r=t(r,e[u],u,e),r instanceof n)return r.value}return r},i.completing=function(n,t){return t=t||o.identity,function(r,u){return r===e?n():u===e?t(r):n(r,u)}},i.append=i.conj=i.conjoin=function(n,t){return n===e?[]:t===e?n:o.isArray(n)?(n.push(t),n):t},i.lastValue=function(n,t){return n===e?null:t===e?n:t},i.transduce=function(n,t,r,u){return r===e&&(r=i.append),u===e&&(u=r()),n instanceof i&&(n=n.transducer()),n!==e&&(r=n(r)),r(i.reduce(t,r,u))},i.prototype.transduce=function(n,t,r){return this._wrapped===e?i.transduce(this.transducer(),n,t,r):i.transduce(this.transducer(),this._wrapped,n,t)},i.asCallback=function(t,r,u){var o;return r===e&&(r=i.lastValue),u===e&&(u=r()),t!==e&&(r=t(r)),function(t){return t===e&&(o=r(o)),o?o:(u=r(u,t),u instanceof n?(o=u.value,r(o),o):u)}},i.prototype.asCallback=function(n,e){return i.asCallback(this.transducer(),n,e)},i.into=function(n,t,r){var u=i.append;return r===e?(r=t,i.reduce(r,u,n)):i.transduce(t,r,u,n)},i.prototype.into=function(n,e){return i.into(n,this.transducer(),e)},i.generate=function(n,t){var r={};return r[c]=function(){var r=t?n():n;return{next:function(){var n=r();return n===e?{done:!0}:{done:!1,value:n}}}},r},i.prototype.generate=function(n,e){return this.wrap(i.generate(n,e))},"function"==typeof define&&define.amd&&define("underscore.transducer",[],function(){return i})}.call(this);
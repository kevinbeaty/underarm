/* underarm v0.0.1 | http://simplectic.com/underarm | License: MIT */(function(e){"use strict";function r(){return e._r=n,t}function i(e){return e}function L(e){k=e}function _(e){return e instanceof A||e instanceof M||e instanceof Mt}function D(e){return e instanceof O||e instanceof M||e instanceof Mt}function P(e,t){e.resolveSingleValue=!0,e.next(t),e.complete()}function H(e,t,n){if(f(t)){var r=0,i=t.length;for(;r<i;r++)e.next(t[r])}else if(!n&&c(t)){var s;for(s in t)v(t,s)&&e.next([s,t[s]])}else e.next(t)}function B(e,t){return function(n){H(n,e,t),n.complete()}}function j(e,t,n){return D(e)?e:new O(e,t,n)}function F(e){var t=new A;return t.onSubscribe=function(t){P(t,e)},t}function I(e){var t;return _(e)?t=e:h(e)?(t=new A,t.onSubscribe=e):f(e)?(t=new A,t.onSubscribe=B(e,!0)):t=F(e),t}function q(e){var t=new M;return l(e)||(e=I(e),e.subscribe(function(e){t.next(e)},function(){t.complete()},function(e){t.error(e)})),_t(t)}function R(e,t,n,r,i){var s=new A,e=I(e);return s.onSubscribe=function(s){var o=function(e){return function(n){e.call(t,s,n)}},u=R.defaults,a=o(h(n)?n:u.next),f=o(h(r)?r:u.complete),l=o(h(i)?i:u.error);return e.subscribe(a,f,l)},s}function U(e,t){return R(e,t,H)}function z(e,t,n,r,s,o){l(n)&&(n=i),h(s)||(s=R.defaults.complete);var u=0,a,f,c=function(e){f=this,a=e,u||s.call(f,e)},p=function(){u--,!u&&!l(a)&&c.call(f,a)},d=function(e,i){var s;if(!e.disposed)try{h(n)?s=n.call(t,i):s=_t(n).attach(i),_(s)?(u++,Bt(s,function(t){r(e,i,t),p()},function(t){e.error(t)})):r(e,i,s)}catch(o){e.error(o)}};return R(e,t,d,c,o)}function W(e,t,n){return z(e,n,t,function(e,t,n){e.next(n)})}function X(e,t,n,r){var i=arguments.length>2;return R(e,r,function(e,s){i?n=t.call(r,n,s):(n=s,i=!0)},function(e){P(e,n)})}function V(e,t){return X(e,function(e,n){return t.call(e,n),e},[])}function $(e,t){return X(e,function(e,n){return t.call(e,n),e},{})}function J(e,t,n,r){var i=arguments.length>2,s=[];return R(e,r,function(e,t){g.call(s,t)},function(e){var o=s.length-1;for(;o>=0;o--)i?n=t.call(r,n,s[o]):(n=s[o],i=!0);P(e,n)})}function K(e,t,n){return z(e,n,t,function(e,t,n){n&&P(e,t)},P)}function Q(e,t,n){return z(e,n,t,function(e,t,n){n&&e.next(t)})}function G(e,t,n){return z(e,n,t,function(e,t,n){n||e.next(t)})}function Y(e,t,n){return z(e,n,t,function(e,t,n){n||P(e,!1)},function(e){P(e,!0)})}function Z(e,t,n){return z(e,n,t,function(e,t,n){n&&P(e,!0)},function(e){P(e,!1)})}function et(e,t,n){return Z(e,function(e){return e===t},n)}function tt(e,t){var n=y.call(arguments,2);return W(e,function(e){return(h(t)?t:e[t]).apply(e,n)})}function nt(e,t){return W(e,function(e){return e[t]})}function rt(e,t,n){var r={computed:-Infinity};return z(e,n,t,function(e,t,n){n>r.computed&&(r.value=t,r.computed=n)},function(e){P(e,r.value)})}function it(e,t,n){var r={computed:Infinity};return z(e,n,t,function(e,t,n){n<r.computed&&(r.value=t,r.computed=n)},function(e){P(e,r.value)})}function st(e,t,n){return U(V(e,function(e){var n=N(e,t);b.call(this,T(this,e,n),0,e)}))}function ot(e,t){return st(e,i,t)}function ut(e,t,n){return $(e,function(e){var r=N(e,t),i=r.call(n,e),s=this[i];l(s)&&(s=[],this[i]=s),g.call(s,e)})}function at(e,t,n){return $(e,function(e){var r=N(e,t),i=r.call(n,e);f(i)?i.length===2?this[i[0]]=i[1]:this[i[0]]=y.call(i,1):this[i]=e})}function ft(e,t){return at(e,i,t)}function lt(e){return V(e,g)}function ct(e){return X(e,function(e,t){return e+1},0)}function ht(e){return U(V(e,w))}function pt(e,t,n){return dt(e,!1,t,n)}function dt(e,t,n,r){var i=0,s=!l(r);if(n>=0&&(!s||r>=0))return t&&s&&r-n===1?R(e,null,P):R(e,null,function(e,t){i++>=n&&e.next(t),s&&i===r&&e.complete()});var o=[];return R(e,null,function(e,t){g.call(o,t)},function(e){var i=0,u=o.length;n=n<0?u+n:n,r=s?r<0?u+r:r:u;if(t&&!s&&n===u-1||s&&r-n===1)P(e,o[n]);else{for(i=d(0,n);i<p(u,r);i++)e.next(o[i]);e.complete()}})}function vt(e,t){var n=l(t);return dt(e,n,0,n?1:t)}function mt(e,t){return pt(e,0,l(t)?-1:-t)}function gt(e,t){var n=l(t);return dt(e,n,n?-1:-t)}function yt(e,t){return pt(e,l(t)?1:t)}function bt(e,t,n){var r=0,i=l(n),s=y.call(arguments,3),o=function(e,n){(r===t||!n&&r<t)&&H(e,s),n||e.complete()},u=function(e,s){(r<t||!i&&r>=t+n)&&e.next(s)};if(t>=0)return R(e,null,function(e,n){o(e,!0),u(e,n),i&&r===t&&e.complete(),r++},o);var a=[];return R(e,null,function(e,t){g.call(a,t)},function(e){var n=a.length;t=n+t;for(;r<n;r++){o(e,!0),u(e,a[r]);if(i&&r===t)break}e.complete()})}function wt(e){return bt(e,-1,1)}function Et(e){var t=y.call(arguments,1);return R(e,null,null,B(t))}function St(e){return bt(e,0,1)}function xt(e){return bt.apply(this,E.call([e,0,0],y.call(arguments,1)))}function Tt(e,t){return l(t)?t=",":t+="",X(e,function(e,n){return e+t+n})}function Nt(e,t){var n=0;return z(e,context,function(e){return t===e},function(e,t,r){r&&P(e,n),n++},function(e){P(e,-1)})}function Ct(e,t){var n=0,r=-1;return z(e,context,function(e){return t===e},function(e,t,i){i&&(r=n),n++},function(e){P(e,r)})}function kt(e){var t=y.call(arguments,1),n=0,r=t.length,i=function(e){n<r&&R(t[n++],null,null,i).subscribe(e),n===r&&e.complete()};return R(e,null,null,i)}function Lt(e,t){return z(e,null,function(e){return f(e)||_(e)?t?U(F(e)):Lt(e):e},function(e,t,n){H(e,n,!0)})}function At(e){return Q(e,function(e){return!!e})}function Ot(e){var t=y.call(arguments,1);return G(function(e){return S.call(t,e)>=0})}function Mt(e,t,n){l(e)?this._detached=!0:e instanceof Mt?(this._parent=e,this._func=t,this._args=n):this._wrapped=I(e)}function _t(e){return e instanceof Mt?e:new Mt(e)}function Dt(e){return e instanceof Mt?e.value():e}function Pt(e){var n,r,i=function(e,t){Mt.prototype[e]=function(){var e=y.call(arguments);return new Mt(this,t,e)}};for(n in e)h(e[n])&&(r=e[n],t[n]=r,i(n,r))}function Bt(e,t,n,r,i){return _t(e).then(t,n,r,i)}function jt(e,t,n){return _t(e).each(t,n)}var t=function(e){return _t(e)};t.VERSION="0.0.1";var n=e._r;typeof exports!="undefined"?exports._r=t:e._r=t,t.noConflict=r,t.identity=i;var s=Object.prototype,o=Array.prototype,u=s.toString,a=s.hasOwnProperty,f=Array.isArray||function(e){return u.call(e)=="[object Array]"},l=function(e){return e===void 0},c=function(e){return e===Object(e)},h=function(e){return u.call(e)=="[object Function]"},p=Math.min,d=Math.max,v=function(e,t){return e&&a.call(e,t)},m=o.pop,g=o.push,y=o.slice,b=o.splice,w=o.unshift,E=o.concat,S=o.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},x=function(e,t){var n=S.call(e,t);n>=0&&b.call(e,n,1)},T=function(e,t,n){n=n?n:i;var r=n(t),s=0,o=e.length,u;while(s<o)u=s+o>>1,n(e[u])<r?s=u+1:o=u;return s},N=function(e,t){return h(t)?t:function(e){return e[t]}},C=e.console||{log:i,error:i},k=function(e){h(C.error)?C.error(e):h(C.log)&&C.log(e)};t.defaultErrorHandler=L;var A=function(){function e(){this.consumers=[]}function n(e,t,n){var r=j(e,t,n),i=this;g.call(i.consumers,r),r.onDispose(function(){i.unsubscribe(r)});if(i.onSubscribe){var s=i.onSubscribe(r);l(s)||(h(s)?r.onDispose(s):h(s.dispose)&&r.onDispose(function(){s.dispose()}))}return r}function r(e){x(this.consumers,e)}var t=e.prototype;return t.onSubscribe=null,t.subscribe=n,t.unsubscribe=r,e}(),O=function(){function e(e,t,n){u(this,"next",e),u(this,"complete",t),u(this,"error",n),this.onDisposes=[]}function n(e){}function r(e){k(e),this.dispose()}function i(){this.dispose()}function s(){var e=this.onDisposes;o=m.call(e);while(o)o(),o=m.call(e);this.disposed=!0}function o(e){this.disposed?e():g.call(this.onDisposes,e)}function u(e,t,n){if(h(n)){var r=e[t];e[t]=function(t){this.disposed||(n.call(e,t),r.call(e,t))}}}var t=e.prototype;return t.disposed=!1,t.resolveSingleValue=!1,t.next=n,t.error=r,t.complete=i,t.dispose=s,t.onDispose=o,e}(),M=function(){function e(){this.producer=new A}function n(e,t,n){var r=j(e,t,n);return r.resolveSingleValue=!0,this.producer.subscribe(r)}function r(e){this.unfulfilled&&(a(this,"next",e),this.value=e)}function i(e){this.unfulfilled&&(a(this,"error",e),this.unfulfilled=!1,this.failed=!0)}function s(){this.unfulfilled&&(a(this,"complete"),this.unfulfilled=!1,this.fulfilled=!0)}function o(e){l(e)||this.next(e),this.complete()}function u(){this.disposed=!0,a(this,"dispose")}function a(e,t,n){var r=0,i=e.producer.consumers;for(;r<i.length;r++)i[r][t](n)}var t=e.prototype;return t.resolveSingleValue=!0,t.disposed=!1,t.unfulfilled=!0,t.fulfilled=!1,t.failed=!1,t.subscribe=n,t.next=r,t.error=i,t.complete=s,t.resolve=o,t.dispose=u,e}();t.promise=q,R.defaults={next:function(e,t){e.next(t)},complete:function(e){e.complete()},error:function(e,t){e.error(t)}},t.seq=U,t.map=t.collect=W,t.reduce=t.foldl=t.inject=X,t.reduceRight=t.foldr=J,t.find=t.detect=K,t.filter=t.select=Q,t.reject=G,t.every=t.all=Y,t.any=t.some=Z,t.include=t.contains=et,t.invoke=t.call=tt,t.pluck=t.get=nt,t.max=rt,t.min=it,t.sortBy=st,t.sort=ot,t.groupBy=ut,t.zipMapBy=at,t.zipMap=ft,t.toArray=lt,t.size=ct,t.reverse=ht,t.slice=pt,t.first=t.head=vt,t.initial=mt,t.last=gt,t.rest=t.tail=yt,t.splice=bt,t.pop=wt,t.push=Et,t.shift=St,t.unshift=xt,t.join=Tt,t.indexOf=Nt,t.lastIndexOf=Ct,t.concat=kt,t.flatten=Lt,t.compact=At,t.without=Ot,t.chain=_t,t.mixin=Pt,t.mixin(t);var Ht=Mt.prototype;Ht.attach=function(e){var t=this;do if(t._detached){t._wrapped=I(e);break}while(t=t._parent);return this},Ht.value=function(){var e=this._wrapped;if(l(e)){var n=[],r=this,e,i,s=!0;while(r._parent){g.call(n,r),r=r._parent;if(!l(r._wrapped)){e=r._wrapped,s=!r._detached;break}}while(r=m.call(n))i=y.call(r._args),w.call(i,e),e=r._func.apply(t,i),s&&(r._wrapped=I(e))}return e},Ht.subscribe=function(e,t,n){return Dt(this).subscribe(e,t,n)},Ht.resolve=function(e){return Dt(this).resolve(e)},Ht.error=function(e){return Dt(this).error(e)},Ht.next=function(e){return Dt(this).next(e)},Ht.complete=function(){return Dt(this).complete()},t.then=Bt,Ht.then=function(e,t,n,r){var i=q(),s=[],o=new O(function(e){h(n)&&n.call(r,e),i.next(e),g.call(s,e)},function(){h(e)&&e.call(r,o.resolveSingleValue?s[s.length-1]:s),i.complete()},function(e){h(t)&&t.call(r,e),i.error(e)});return Dt(this).subscribe(o),i},t.each=t.forEach=jt,Ht.each=Ht.forEach=function(e,t){var n=[],r=new O(function(e){g.call(n,e)},function(){var i=0,s=n.length,o=r.resolveSingleValue;if(s)if(!o)for(;i<s;i++)e.call(t,n[i],i,n);else{var u=n[0];if(u&&u.length===+u.length){s=u.length;for(;i<s;i++)e.call(t,u[i],i,u)}else if(c(u))for(i in u)v(u,i)&&e.call(t,u[i],i,u);else e.call(t,u,0,n)}});return Dt(this).subscribe(r)}})(this);
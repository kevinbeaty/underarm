/* underarm v0.0.1 | http://kevinbeaty.net/projects/underarm | License: MIT */(function(e){"use strict";function R(e,t){e.resolveSingleValue=!0,e.next(t),e.complete()}function U(e){return function(t){R(t,e.value)}}function $(e,t){f(t)?C.call(t,function(t){e.next(t)}):c(t)?k.call(t,function(t,n){e.next([n,t])}):e.next(t)}function J(e){return function(t){$(t,e),t.complete()}}function K(e){return e instanceof I||e instanceof fn&&e._wrapped instanceof I}function Q(e){return e instanceof fn||e instanceof F||e instanceof q}function G(e,t,n){return K(e)?e:new I(e,t,n)}function Y(e){return Q(e)?e:new F(f(e)?J(e):U({value:e}))}function Z(e,t,n,r,i){var s=new F,e=Y(e);return s.onSubscribe=function(s){var o=function(e){return function(n){e.call(t,s,n)}},u=Z.defaults,a=o(h(n)?n:u.next),f=o(h(r)?r:u.complete),l=o(h(i)?i:u.error);return e.subscribe(a,f,l)},s}function et(e,t,n,r){var i=[];return Z(e,t,function(e,t){y.call(i,t)},function(e){n(e,i)},r)}function tt(e,t,n){if(h(e))return e.call(n,t);if(Q(e))return cn(e).attach(t);if(p(e))return e.exec(t);if(f(e)){var r=mn(),i=[],s=e.length;return C.call(e,function(e,n){cn(e).attach(t).then(function(e){i[n]=e,--s||r.resolve(i)})}),r}return e}function nt(e,t,n,r,i,s){l(n)&&(n=vn),h(i)||(i=Z.defaults.complete);var o=0,u,a,f=function(e){a=this,u=e,o||i.call(a,e)},c=function(){o--,!o&&!l(u)&&f.call(a,u)},p=function(e,i){var s;if(!e.disposed)try{s=tt(n,i,t),Q(s)?(o++,yn(s,function(t){r(e,i,t),c()},function(t){e.error(t)})):r(e,i,s)}catch(u){e.error(u)}};return Z(e,t,p,f,s)}function rt(e,t){return Z(e,t,$)}function it(e,t,n){return nt(e,n,t,function(e,t,n){e.next(n)})}function st(e,t,n,r){var i=arguments.length>2,n={value:n};return Z(e,r,function(e,s){i?n.value=t.call(r,n.value,s):(n.value=s,i=!0)},U(n))}function ot(e){return function(t,n){return st(t,function(e,t){return n.call(e,t),e},new e)}}function ft(e,t,n,r){var i=arguments.length>2;return et(e,r,function(e,s){var o=s.length-1;for(;o>=0;o--)i?n=t.call(r,n,s[o]):(n=s[o],i=!0);R(e,n)})}function lt(e,t,n){return nt(e,n,t,function(e,t,n){n&&R(e,t)},z)}function ct(e,t,n){return nt(e,n,t,function(e,t,n){n&&e.next(t)})}function ht(e,t,n){return nt(e,n,t,function(e,t,n){n||e.next(t)})}function pt(e,t,n){return nt(e,n,t,function(e,t,n){n||W(e)},X)}function dt(e,t,n){return nt(e,n,t,function(e,t,n){n&&X(e)},W)}function vt(e,t,n){return dt(e,u(t),n)}function mt(e,t){var n=b.call(arguments,2);return it(e,function(e){return(h(t)?t:e[t]).apply(e,n)})}function gt(e,t){return it(e,function(e){return e[t]})}function yt(e,t,n){var r={computed:-Infinity};return nt(e,n,t,function(e,t,n){n>r.computed&&(r.value=t,r.computed=n)},U(r))}function bt(e,t,n){var r={computed:Infinity};return nt(e,n,t,function(e,t,n){n<r.computed&&(r.value=t,r.computed=n)},U(r))}function wt(e,t,n){return rt(ut(e,function(e){var n=P(e,t);w.call(this,D(this,e,n),0,e)}))}function Et(e,t){return wt(e,vn,t)}function St(e,t,n){return at(e,function(e){var r=P(e,t),i=r.call(n,e),s=this[i];l(s)&&(s=[],this[i]=s),y.call(s,e)})}function xt(e){return ut(e,y)}function Tt(e){return st(e,function(e,t){return e+1},0)}function Nt(e){return rt(ut(e,S))}function Ct(e,t,n){return kt(e,!1,t,n)}function kt(e,t,n,r){var i=0,s=!l(r);return n>=0&&(!s||r>=0)?t&&s&&r-n===1?Z(e,null,R):Z(e,null,function(e,t){i++>=n&&e.next(t),s&&i===r&&e.complete()}):et(e,null,function(e,i){var o=0,u=i.length;n=n<0?u+n:n,r=s?r<0?u+r:r:u;if(t&&!s&&n===u-1||s&&r-n===1)R(e,i[n]);else{for(o=v(0,n);o<d(u,r);o++)e.next(i[o]);e.complete()}})}function Lt(e,t){var n=l(t);return kt(e,n,0,n?1:t)}function At(e,t){return Ct(e,0,l(t)?-1:-t)}function Ot(e,t){var n=l(t);return kt(e,n,n?-1:-t)}function Mt(e,t){return Ct(e,l(t)?1:t)}function _t(e,t,n){var r=0,i=l(n),s=b.call(arguments,3),o=function(e,n){(r===t||!n&&r<t)&&$(e,s),n||e.complete()},u=function(e,s){(r<t||!i&&r>=t+n)&&e.next(s)};return t>=0?Z(e,null,function(e,n){o(e,!0),u(e,n),i&&r===t&&e.complete(),r++},o):et(e,null,function(e,n){var s=n.length;t=s+t;for(;r<s;r++){o(e,!0),u(e,n[r]);if(i&&r===t)break}e.complete()})}function Dt(e){return _t(e,-1,1)}function Pt(e){var t=b.call(arguments,1);return Z(e,null,null,J(t))}function Ht(e){return _t(e,0,1)}function Bt(e){return _t.apply(this,x.call([e,0,0],b.call(arguments,1)))}function jt(e,t){return t=l(t)?",":t+="",st(e,function(e,n){return e+t+n})}function Ft(e,t){var n=0;return nt(e,context,u(t),function(e,t,r){r&&R(e,n),n++},V)}function It(e,t){var n=0,r={value:-1};return nt(e,context,u(t),function(e,t,i){i&&(r.value=n),n++},U(r))}function qt(e){var t=b.call(arguments,1),n=0,r=t.length,i=function(e){n<r&&Z(t[n++],null,null,i).subscribe(e),n===r&&e.complete()};return Z(e,null,null,i)}function Rt(e){return ct(e,function(e){return!!e})}function Ut(e,t){return nt(e,null,function(e){return f(e)||Q(e)?t?qt(e):Ut(e):e},function(e,t,n){$(e,n)})}function zt(e){var t=b.call(arguments,1);return ht(e,function(e){return M(t,e)})}function Wt(e,t,n){var r=[];return nt(e,context,n,function(e,n,i){M(r,i)||e.next(i),t?r[0]=i:y.call(r,i)})}function Xt(){return Wt(Ut(b.call(arguments),!0))}function Vt(e){var t=[],n=b.call(arguments,1),r=0,i=n.length,s=function(e){r<i&&et(n[r++],null,function(e,n){_(t,function(e){return!M(n,e)}),t.length?s(e):e.complete()}).subscribe(e),r===i&&($(e,t),e.complete())};return Z(e,null,function(e,n){M(t,n)||y.call(t,n)},s)}function $t(e){var t=b.call(arguments,1),n=0,r=t.length,i,s=function(e,o){o&&(i=o),n<r&&Z(t[n++],null,function(e,t){_(i,t),i.length||e.complete()},s).subscribe(i),n===r&&($(e,i),e.complete())};return et(e,null,s)}function Jt(){var e=new F,t=b.call(arguments);return e.onSubscribe=function(e){var n=[],r=Infinity,i=function(){var i=n.length===t.length&&A.call(n,function(e){return e.depth>=r});i&&e.complete()},s=function(r,s){y.call(r.values,s),r.depth++;var o=n.length===t.length&&A.call(n,function(e){return e.values.length});if(o){var u=[];C.call(n,function(e){y.call(u,E.call(e.values))}),e.next(u)}i()},o=function(e){e.depth<r&&(r=e.depth),i()};C.call(t,function(t,r){var i=n[r]={producer:Y(t),values:[],depth:0},u=i.producer.subscribe(function(e){s(i,e)},function(){o(i)},function(t){e.error(t)});e.onDispose(u)})},e}function Kt(e,t,n){return at(e,function(e){var r=P(e,t),i=r.call(n,e);f(i)?i.length===2?this[i[0]]=i[1]:this[i[0]]=b.call(i,1):this[i]=e})}function Qt(e,t){return Kt(e,vn,t)}function Gt(e){return gt(rt(e),0)}function Yt(e){return gt(rt(e),1)}function Zt(e){var t=b.call(arguments,1);return Z(e,null,function(e,n){C.call(t,function(e){var t;for(t in e)n[t]=e[t]}),e.next(n)})}function en(e){var t=b.call(arguments,1),n=[];return C.call(t,function(e){C.call(f(e)?e:[e],function(e){y.call(n,e)})}),Z(e,null,function(e,t){var r={};C.call(n,function(e){e in t&&(r[e]=t[e])}),e.next(r)})}function tn(e){var t=b.call(arguments,1);return Z(e,null,function(e,n){C.call(t,function(e){var t;for(t in e)n[t]==null&&(n[t]=e[t])}),e.next(n)})}function nn(e,t,n,r){return Z(e,null,function(e,n){h(t)&&t(n),e.next(n)},function(e){h(n)&&n(),e.complete()},function(e,t){h(r)&&r(t),e.error(t)})}function rn(e,t,n){return function(r,i){var s=function(){r[e](i)};t(s,n)}}function sn(e,t,n){var r=b.call(arguments,2);return Z(e,null,rn("next",t,n),rn("complete",t,n),rn("error",t,n))}function on(e,t){return sn(e,setTimeout,t)}function un(e){return sn(e,j)}function an(e,t,n){var r=null,i=vn;return Z(e,null,function(e,s){var o=n&&!r;i=function(){r=null,n||e.next(s)},clearTimeout(r),r=setTimeout(i,t),o&&e.next(s)},function(e){clearTimeout(r),i(),e.complete()},function(e,t){clearTimeout(r),e.error(t)})}function fn(e,t,n){if(l(e))this._detached=!0;else if(e instanceof fn)this._parent=e,this._func=t,this._args=n;else{var r=Y(e);this._wrapped=r,q.extend(this,r)}}function cn(e){return e instanceof fn?e:new fn(e)}function hn(e){return e instanceof fn?e.value():e}function pn(e){var n,r,i=function(e,t){ln[e]=function(){var e=b.call(arguments);return new fn(this,t,e)}};for(n in e)h(e[n])&&(r=e[n],t[n]=r,i(n,r))}function dn(){return e._r=n,t}function vn(e){return e}function mn(){return cn(new q)}function gn(e){B=e}function yn(e,t,n,r,i){return cn(e).then(t,n,r,i)}function bn(e,t,n,r,i){var s=tt(n,r,i);Q(s)?yn(s,function(n){e[t](n)},function(t){e.error(t)}):(l(s)&&(s=r),e[t](s))}function wn(e,t,n){return cn(e).each(t,n)}var t=function(e){return cn(e)};t.VERSION="0.0.1";var n=e._r;typeof exports!="undefined"?exports._r=t:e._r=t;var r=Object.prototype,i=Array.prototype,s=r.toString,o=r.hasOwnProperty,u=function(e){return function(t){return t===e}},a=function(e){return function(t){return s.call(t)==e}},f=Array.isArray||a("[object Array]"),l=u(),c=function(e){return e===Object(e)},h=a("[object Function]"),p=a("[object RegExp]"),d=Math.min,v=Math.max,m=function(e,t){return e&&o.call(e,t)},g=i.pop,y=i.push,b=i.slice,w=i.splice,E=i.shift,S=i.unshift,x=i.concat,T={},N=function(e,t){var n=0,r=this.length;for(;n<r;n++)if(e.call(t||this,this[n],n,this)===T)break},C=i.forEach||N,k=function(e,t){var n;for(n in this)if(m(this,n)&&e.call(t||this,this[n],n,this)===T)break},L=i.some||function(e,t){var n=!1;return N.call(this,function(r,i,s){if(e.call(t,r,i,s))return n=!0,T},t),n},A=i.every||function(e,t){var n=!0;return N.call(this,function(r,i,s){if(!e.call(t,r,i,s))return n=!1,T},t),n},O=i.indexOf||function(e){var t=-1;return N.call(this,function(n,r){if(n===e)return t=r,T},context),t},M=function(e,t){return O.call(e,t)>=0},_=function(e,t){h(t)||(t=u(t));var n=0,r=e.length;for(;n<r;n++)t(e[n],n,e)&&(w.call(e,n--,1),r--)},D=function(e,t,n){n=n?n:vn;var r=n(t),i=0,s=e.length,o;while(i<s)o=i+s>>1,n(e[o])<r?i=o+1:s=o;return i},P=function(e,t){return h(t)?t:function(e){return e[t]}},H=e.console||{log:vn,error:vn},B=function(e){h(H.error)?H.error(e):h(H.log)&&H.log(e)},j=function(e){setTimeout(e,0)},F=function(){function e(e){this.consumers=[],this.onSubscribe=e}function n(e,t,n){var r=G(e,t,n),i=this;y.call(i.consumers,r),r.onDispose(function(){i.unsubscribe(r)});if(i.onSubscribe){var s=i.onSubscribe(r);l(s)||(h(s)?r.onDispose(s):h(s.dispose)&&r.onDispose(function(){s.dispose()}))}return r}function r(e){_(this.consumers,e)}var t=e.prototype;return t.subscribe=n,t.unsubscribe=r,e}(),I=function(){function e(e,t,n){u(this,"next",e),u(this,"complete",t),u(this,"error",n),this.onDisposes=[],this.disposed=!1,this.resolveSingleValue=!1}function n(e){}function r(e){B(e),this.dispose()}function i(){this.dispose()}function s(){var e=this.onDisposes;o=g.call(e);while(o)o(),o=g.call(e);this.disposed=!0}function o(e){h(e)&&(this.disposed?e():y.call(this.onDisposes,e))}function u(e,t,n){if(h(n)){var r=e[t];e[t]=function(t){this.disposed||(n.call(e,t),r.call(e,t))}}}var t=e.prototype;return t.next=n,t.error=r,t.complete=i,t.dispose=s,t.onDispose=o,e}(),q=function(){function e(){I.call(this),this.producer=new F(function(e){e.resolveSingleValue=!0}),this.promise=cn(this.producer),this.resolveSingleValue=!0,this.disposed=!1,this.unfulfilled=!0,this.fulfilled=!1,this.failed=!1}function n(e,t,n){return this.producer.subscribe(e,t,n)}function r(e){this.unfulfilled&&a(this,"next",e)}function i(e){this.unfulfilled&&(a(this,"error",e),this.unfulfilled=!1,this.failed=!0,this.producer.onSubscribe=function(t){t.resolveSingleValue=!0,t.error(e),t.complete()})}function s(){this.resolve()}function o(e){this.unfulfilled&&(l(e)||(this.resolvedValue=e,this.producer.resolvedValue=e),a(this,"complete"),this.unfulfilled=!1,this.fulfilled=!0,this.producer.onSubscribe=function(t){t.resolveSingleValue=!0,h(t.resolve)?t.resolve(e):(l(e)||t.next(e),t.complete())})}function u(){this.disposed=!0,a(this,"dispose")}function a(e,t,n){var r=b.call(e.producer.consumers);C.call(r,function(e){e[t](n)}),I.prototype[t].call(e,n)}e.prototype=new I;var t=e.prototype;return t.subscribe=n,t.next=r,t.error=i,t.complete=s,t.resolve=o,t.dispose=u,e.extend=function(t,n){n instanceof e&&(t.promise=n.promise,C.call(["next","complete","error","resolve","dispose","onDispose"],function(e){t[e]=function(){n[e].apply(n,arguments)}}))},e}(),z=U({}),W=U({value:!1}),X=U({value:!0}),V=U({value:-1});Z.defaults={next:function(e,t){e.next(t)},complete:function(e){e.complete()},error:function(e,t){e.error(t)}},t.seq=t.entries=rt,t.map=t.collect=it,t.reduce=t.foldl=t.inject=st;var ut=ot(Array),at=ot(Object);t.reduceRight=t.foldr=ft,t.find=t.detect=lt,t.filter=t.select=ct,t.reject=ht,t.every=t.all=pt,t.any=t.some=dt,t.include=t.contains=vt,t.invoke=t.call=mt,t.pluck=t.get=gt,t.max=yt,t.min=bt,t.sortBy=wt,t.sort=Et,t.groupBy=St,t.toArray=xt,t.size=Tt,t.reverse=Nt,t.slice=Ct,t.first=t.head=Lt,t.initial=At,t.last=Ot,t.rest=t.tail=Mt,t.splice=_t,t.pop=Dt,t.push=Pt,t.shift=Ht,t.unshift=Bt,t.join=jt,t.indexOf=Ft,t.lastIndexOf=It,t.concat=qt,t.compact=Rt,t.flatten=Ut,t.without=zt,t.uniq=t.unique=Wt,t.union=Xt,t.intersection=Vt,t.difference=$t,t.zip=Jt,t.zipObjectBy=Kt,t.zipObject=Qt,t.keys=Gt,t.values=Yt,t.extend=Zt,t.pick=en,t.defaults=tn,t.tap=nn,t.delay=on,t.defer=un,t.debounce=an;var ln=fn.prototype;t.chain=cn,pn(t),t.mixin=pn,t.noConflict=dn,t.identity=vn,t.deferred=mn,t.defaultErrorHandler=gn,ln.attach=function(e){var t=this;do if(t._detached){t._wrapped=Y(e);break}while(t=t._parent);return this},ln.value=function(){var e=this._wrapped;if(l(e)){var n=[],r=this,e,i,s=!0;while(r._parent){y.call(n,r),r=r._parent;if(!l(r._wrapped)){e=r._wrapped,s=!r._detached;break}}while(r=g.call(n))i=b.call(r._args),S.call(i,e),e=r._func.apply(t,i),s&&(r._wrapped=Y(e))}return e},ln.subscribe=function(e,t,n){return hn(this).subscribe(e,t,n)},t.when=yn,ln.then=function(e,t,n,r){var i=mn(),s=hn(this),o=[],u=new I(function(e){u.resolveSingleValue?o=[e]:y.call(o,e),bn(i,"next",n,e,r)},function(){var t=m(s,"resolvedValue")?s.resolvedValue:u.resolveSingleValue?o[o.length-1]:o;bn(i,"resolve",e,t,r)},function(e){bn(i,"error",t,e,r)});return s.subscribe(u),i},ln.callback=function(){return this.callbackWithBoundDeferred(function(e){this.next(e)})},ln.ncallback=function(){return this.callbackWithBoundDeferred(function(e,t){e?this.error(e):this.next(t)})},ln.callbackWithBoundDeferred=function(e){var t=mn(),n=function(){e.apply(t,arguments)};n.next=function(e){t.next(e)},n.resolve=function(e){t.resolve(e)},n.complete=function(){t.complete()},n.error=function(e){t.error(e)};var r=this.attach(t).then();return n.then=function(e,t,n){return r.then(e,t,n)},n},t.each=t.forEach=wn,ln.each=ln.forEach=function(e,t){var n=[],r=new I(function(e){y.call(n,e)},function(){var i=0,s=n.length,o=r.resolveSingleValue;if(s)if(!o)C.call(n,e,t);else{var u=n[0];u&&u.length===+u.length?(s=u.length,C.call(n,e,t)):c(u)?k.call(u,e,t):e.call(t,u,0,n)}});return hn(this).subscribe(r)}})(this);